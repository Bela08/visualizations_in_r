<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Alex Slavenko and Maria Novosolov" />


<title>Visualizations in R</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.39.2/plotly-latest.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Visualizations in R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://example.com">EcoDataSci-TL</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Visualizations in R</h1>
<h4 class="author"><em>Alex Slavenko and Maria Novosolov</em></h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>In this workshop we will focus three topics:</p>
<ol style="list-style-type: decimal">
<li><p>How to prepare our plots for publication</p></li>
<li><p>How to create interactive visualizations</p></li>
<li><p>How to create geographic visualizations</p></li>
</ol>
<p>We will use data on per capita alcohol consumption in the countries of the world in 2010. At first, we will explore the data by generating typical plots. We will learn how to manipulate and design these plots to make them publication worthy, and how to turn them into interactive plots. We will then use the same data in ashapefile format to learn how to plot the data on a global map.</p>
<p>First thing is to make sure you have all the libraries uploaded for this session.</p>
<pre class="r"><code>library(tidyverse)
library(plotly)
library(leaflet)
library(geojsonio)
library(ggpubr)
library(ggvis)
library(RColorBrewer)
library(extrafont)
library(cowplot)
library(scales)
library(ggmap)
library(mapdata)</code></pre>
<p>A bit more preperation before we start: add all the fonts in your computer to R</p>
<pre class="r"><code># font_import(prompt = F) #this imports fonts from your computer into R, and may take a lot of time
#load the fonts
loadfonts(quiet = T) #you may need to change the device, depending on whether you want to print the plot in R or export it</code></pre>
<p>Next, upload the data into your work environment. Make sure to change the path that you are using in the following code to fit the path for the file in your computer. We will upload the spatial data (the map) that we will use later, and save the metadata as a tibble to use it in the first part of the session. For your work, make sure to set the working directory with:</p>
<p>setwd(“your/path/to/data/file”)</p>
<p>or always add it when you read the file in.</p>
<pre class="r"><code>#upload the spatial file using geojson and specifying to R that it&#39;s a shapefile
data.vis.sp&lt;- geojsonio::geojson_read(&quot;country_alcohol.geojson&quot;,
  what = &quot;sp&quot;)
#save the data from the shapefile into a tibble
data.vis&lt;- as_tibble(data.vis.sp@data)
#remove all the lines with NA&#39;s. The function complete.cases removes all the lines that have NA&#39;s in them somewhere
data.vis&lt;- data.vis[complete.cases(data.vis),]</code></pre>
<p>Let’s view our data:</p>
<pre class="r"><code>data.vis</code></pre>
<pre><code>## # A tibble: 188 x 11
##    FIPS_CNTRY CNTRY_NAME POP_CNTRY SQKM_CNTRY LANDLOCKED ISLAND Continent
##    &lt;fct&gt;      &lt;fct&gt;      &lt;fct&gt;          &lt;dbl&gt; &lt;fct&gt;      &lt;fct&gt;  &lt;fct&gt;    
##  1 AC         Antigua a~ 65212           462. N          Y      North Am~
##  2 AF         Afghanist~ 17250390     641869. Y          N      Asia     
##  3 AG         Algeria    27459230    2320972  N          N      Africa   
##  4 AJ         Azerbaijan 5487866       85808. Y          N      Asia     
##  5 AL         Albania    3416945       28754. N          N      Europe   
##  6 AM         Armenia    3377228       29872. Y          N      Europe   
##  7 AN         Andorra    55335           452. Y          N      Europe   
##  8 AO         Angola     11527260    1252421  N          N      Africa   
##  9 AR         Argentina  33796870    2781013  N          N      South Am~
## 10 AS         Australia  17827520    7706142  N          N      Oceania  
## # ... with 178 more rows, and 4 more variables: spirits &lt;dbl&gt;, beer &lt;dbl&gt;,
## #   wine &lt;dbl&gt;, total &lt;dbl&gt;</code></pre>
<p>Each row in our data is a country. Our columns give data for each country on its population, size (in square km), if it’s landlocked or not, if it’s an island nation or not, which continent it is on, and the per capita alcohol consumption for 2010: in spirits, beer, wine, and the total consumption.</p>
<p>Now, let’s start plotting!</p>
</div>
<div id="publication-quality-plots" class="section level1">
<h1>Publication quality plots</h1>
<p>First, we’ll plot some data. We’ll plot the size of country (log-transformed) on the x axis, and the total alcohol consumption on the y axis. We’ll also colour our data based on continent.</p>
<pre class="r"><code>p &lt;- ggplot(aes(x = SQKM_CNTRY, y = total, colour = Continent), data = data.vis) + geom_point() + ggtitle(&quot;Per capita alcohol consumption&quot;)
p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>This basic scatterplot is kind of ugly and uninformative. The good news is this can be improved quite easily, and we can actually make a decent looking plot out of this! We’ll do this step by step.</p>
<div id="colour-schemes" class="section level2">
<h2>Colour schemes</h2>
<p>Our first step will be colour schemes. The easiest thing to is to use the package ‘RColorBrewer’to generate a custom palette from a few nice looking options. With the function ’brewer.pal’ you define how many colours you want (6 in our case, for 6 continents), and which palette you want (in this case we use a palette called “Set3” - see the documentation of brewer.pal for all possible palette names).</p>
<pre class="r"><code>my.palette &lt;- brewer.pal(6, &quot;Set3&quot;)
p + scale_color_manual(values = my.palette)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>We can also generate custom color palettes using online tools. There are many different online tools to generate colour palettes, and in this tutorial we will try one nifty one, found on this website: <a href="https://palettegenerator.com/" class="uri">https://palettegenerator.com/</a> So we’ll use this one to make an epic Max Max colour palette!</p>
<pre class="r"><code>witness.me &lt;- c(&quot;#DE8136&quot;, &quot;#19191B&quot;, &quot;#F6CAB1&quot;, &quot;#533927&quot;, &quot;#986039&quot;, &quot;#166268&quot;)
p &lt;- p + scale_color_manual(values = witness.me)
p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>We’ll stick with this palette for the rest of the tutorial.</p>
</div>
<div id="theme-layers" class="section level2">
<h2>Theme layers</h2>
<p>Now, let’s try and make the plot look a bit better. We can do this using the theme options - theme() has a LOT of different arguments that let you change the way your plot looks. You can change the background, the axes, the gridlines, the fonts, the titles, and the legend. Modifying elements in the theme is simple, but notice that different elements inherit different functions. For instance, modifying text elements is done using element_text(), whereas modifying line elements is done using element_line(). The one exception is element_blank() - use this for (almost) any type of element that you want to remove from the plot completely. Here are a few useful examples:</p>
<pre class="r"><code>p + theme(text = element_text(size = 16)) #change the font size</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>p + theme(text = element_text(family = &quot;Comic Sans MS&quot;)) #change the font family (this is horrible, never use comic sans)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<pre class="r"><code>p + theme(panel.grid = element_blank()) #remove gridlines</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-3.png" width="672" /></p>
<pre class="r"><code>p + theme(panel.background = element_rect(fill = &quot;black&quot;)) #change color of background</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-4.png" width="672" /></p>
<pre class="r"><code>p + theme(axis.line = element_line(colour = &quot;black&quot;)) #add axis lines</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-5.png" width="672" /></p>
<pre class="r"><code>p &lt;- p + theme(panel.grid = element_blank(), axis.line = element_line(colour = &quot;black&quot;)) #make several changes together
p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-6.png" width="672" /></p>
<div id="legend-manipulation" class="section level3">
<h3>Legend manipulation</h3>
<p>One of the most useful things you can do is to manipulate the legend. You can rename items in the legend, restyle it, move it around, or just delete it altogether.</p>
<pre class="r"><code>p + theme(legend.position = &quot;none&quot;) #remove the legend</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>p + theme(legend.position = c(.1,.75)) #move the legend to a different position</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
<pre class="r"><code>p + theme(legend.title = element_blank()) #remove the title of the legend</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-3.png" width="672" /></p>
</div>
<div id="axes-manipulation" class="section level3">
<h3>Axes manipulation</h3>
<p>First of all, it’s about time we do something about our ugly data. One of our main issues is that the country areas (on the X axis) should be log-transformed. We can transform our data using a simple line of code, and some functions from the ‘scales’ package. Here are some examples, but make sure to check the trans() function documentation and pick the type of transformation that fits your data!</p>
<pre class="r"><code>p + scale_x_continuous(trans = log10_trans()) #log10 transformation</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code>p + scale_x_continuous(trans = sqrt_trans()) #square-root transformation</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<pre class="r"><code>p + scale_x_continuous(trans = reverse_trans()) #reverse transformation</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-10-3.png" width="672" /></p>
<p>And to make this look a bit better, let’s change the tick labels to have actual numbers. We’ll do this with the trans_format() function. We tell the function which transformation to apply to the numbers, and the format in which to write the labels.</p>
<pre class="r"><code>p &lt;- p + scale_x_continuous(trans = log10_trans(), labels = trans_format(&quot;log10&quot;, math_format(10^.x)))
p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>You may also want to change the titles of your axes - this is always useful because usually your data will have column names that are short and easy to type, but less informative for a plot you want to publish. The expression() function (from base R) is useful for this, because it allows you to add special characters, as well as create super- and subscripts, italics, etc.</p>
<pre class="r"><code>p &lt;- p + labs(x = expression(&quot;Area (km&quot;^&quot;2&quot;~&quot;)&quot;), y = expression(&quot;Consumption (l&quot;/&quot;y&quot;~&quot;)&quot;))
p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
</div>
<div id="facets-rotations-etc." class="section level2">
<h2>Facets, rotations, etc.</h2>
<p>Now we can deal with another problem - this plot is a bit cluttered. It’s hard to tell the different continents from one another, which makes it difficult to identify trends. We can solve this via facetting - this is a cool tool that allows us to break up our one plot into several similar plots - they all have the same axes, but they are separated by the factor (continents in this case).</p>
<pre class="r"><code>p + facet_grid(Continent ~ .) #facet in the vertical direction</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre class="r"><code>p + facet_grid(. ~ Continent) #facet in the horizontal direction</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
<pre class="r"><code>p + facet_wrap( ~ Continent, ncol = 3) #facet in a grid, with a set number of columns (or rows)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-13-3.png" width="672" /></p>
<p>Your plot doesn’t have to be faceted by a factor that you’ve mapped. For instance, we can facet our plot by the factor ISLAND, even though it has no aesthetic mapped to it:</p>
<pre class="r"><code>p + facet_grid(. ~ ISLAND)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>We’ve now managed to generate a pretty nice looking plot. You’ll see that we all facets have the same range of values in their axes - this allows us to compare the scatterplots in the different levels of our factor (continent), but because they are each in a different “plot”, it’s a lot less messy and we can see where there is no trend (Europe) and where they might be something going on (Asia).</p>
<p>Now let’s try to do something a bit more interesting. Let’s try to generate a different plot that allows us to check for differences in alcohol consumption between continents, without taking into acount area. We’ll do this using a violin plot, which is a slightly fancier and more informative version of a boxplot. We’ll use the same colour palette as we did for the scatterplot.</p>
<pre class="r"><code>p2 &lt;- ggplot(aes(x = Continent, y = total, fill = Continent), data = data.vis) + 
  geom_violin(trim = F) +
  geom_boxplot(width = .1) +
  geom_jitter(height = 0, width = .1, alpha = .2) +
  scale_fill_manual(values = witness.me) +
  theme(panel.grid = element_blank(), axis.line = element_line(colour = &quot;black&quot;)) +
  labs(x = &quot;Continent&quot;, y = expression(&quot;Consumption (l&quot;/&quot;y&quot;~&quot;)&quot;)) +
  ggtitle(&quot;Per capita alcohol consumption&quot;)
p2</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Now let’s try and combine these two plots - we want to put them both together, side by side. First thing we’ll do is rotate our violin plot. This is very easily done:</p>
<pre class="r"><code>p2 + coord_flip()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Now, we’ll use the plot_grid() function from the package ‘cowplot’ to draw the two plots side by side.</p>
<pre class="r"><code>p &lt;- p + facet_grid(Continent ~ .) + theme(legend.position = &quot;none&quot;, strip.background = element_blank(), strip.text = element_blank())
p2 &lt;- p2 + coord_flip() + theme(legend.position = &quot;none&quot;, axis.title.y = element_blank(), plot.title = element_text(colour = &quot;white&quot;)) + scale_x_discrete(limits = rev(levels(data.vis$Continent)))
p3 &lt;- plot_grid(p, p2)
p3</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="export" class="section level2">
<h2>Export</h2>
<p>Finally, it’s time to export our plot. There are several formats basic R can export to, the most useful of which are JPG, PNG and PDF. The code for them all follows the same basic format.</p>
<pre class="r"><code>jpeg(&quot;myplot.jpg&quot;)
p3
dev.off()</code></pre>
<pre><code>## png 
##   2</code></pre>
<pre class="r"><code>png(&quot;myplot.png&quot;)
p3
dev.off()</code></pre>
<pre><code>## png 
##   2</code></pre>
<pre class="r"><code>pdf(&quot;myplot.pdf&quot;)
p3
dev.off()</code></pre>
<pre><code>## png 
##   2</code></pre>
<div id="high-quality-files" class="section level3">
<h3>High quality files</h3>
<p>As you’ve probably noticed, while the PDF file looks ok, the JPG and PNG are really poor quality. However, we can fix this. For instance, we can create a TIFF file with a higher resolution and larger size. Also, we can change the size of the PDF, or export to other, different file formats.</p>
<pre class="r"><code>tiff(&quot;myplot.tiff&quot;, height = 20, width = 20, units = &quot;cm&quot;, res = 300)
p3
dev.off()</code></pre>
<pre><code>## png 
##   2</code></pre>
<pre class="r"><code>pdf(&quot;myplot.pdf&quot;, height = 20, width = 20)
p3
dev.off()</code></pre>
<pre><code>## png 
##   2</code></pre>
</div>
</div>
<div id="ggpubr" class="section level2">
<h2>ggpubr</h2>
<p>After we learned all this the hard way, let’s learn the easy way. The ‘ggpubr’ package is the simple way to create nice looking plots. For instance, we can recreate our violin plot using just one line of code, and even add some analysis to it.</p>
<pre class="r"><code>ggviolin(data.vis, x = &quot;Continent&quot;, y = &quot;total&quot;, fill = &quot;Continent&quot;, palette = witness.me, add = c(&quot;boxplot&quot;, &quot;jitter&quot;), ylab = expression(&quot;Consumption (l&quot;/&quot;y&quot;~&quot;)&quot;), rotate = T, add.params = list(alpha = .2))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>‘ggpubr’ has similar types of functions for different types of plots (scatterplots, boxplots, etc.). All look lovely, and require a lot less hassle to generate. It’s a package well worth exploring. Here a few examples of the types of plots you can generate with ‘ggpubr’:</p>
<pre class="r"><code>#density plots
ggdensity(data.vis, x = &quot;total&quot;, color = &quot;Continent&quot;, fill = &quot;Continent&quot;, palette = witness.me, facet.by = &quot;Continent&quot;, xlab = expression(&quot;Consumption (l&quot;/&quot;y&quot;~&quot;)&quot;)) </code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<pre class="r"><code>#we can also mark the mean (or medians) and add tickmarks (rug = T) to show the actual values of the observations
ggdensity(data.vis, x = &quot;total&quot;, add = &quot;mean&quot;, rug = T, color = &quot;Continent&quot;, fill = &quot;Continent&quot;, palette = witness.me, facet.by = &quot;Continent&quot;, xlab = expression(&quot;Consumption (l&quot;/&quot;y&quot;~&quot;)&quot;)) </code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-21-2.png" width="672" /></p>
<pre class="r"><code>#ordered bar plots
ggbarplot(data.vis, x = &quot;CNTRY_NAME&quot;, y = &quot;total&quot;, color = &quot;Continent&quot;, fill = &quot;Continent&quot;, palette = witness.me, sort.val = &quot;desc&quot;, sort.by.groups = F, x.text.angle = 90, ylab = expression(&quot;Consumption (l&quot;/&quot;y&quot;~&quot;)&quot;), xlab = &quot;Country&quot;) + font(&quot;x.text&quot;, size = 4)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<pre class="r"><code>#Lollipop chart, as an alternative to barplot
ggdotchart(data.vis, x = &quot;CNTRY_NAME&quot;, y = &quot;total&quot;, color = &quot;Continent&quot;, palette = witness.me, sorting = &quot;descending&quot;, rotate = T, group = &quot;Continent&quot;, add = &quot;segments&quot;, ylab = expression(&quot;Consumption (l&quot;/&quot;y&quot;~&quot;)&quot;), xlab = &quot;Country&quot;) + font(&quot;y.text&quot;, size = 4)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>But really, the best way to learn is to just play around with the package and see what it’s capable of.</p>
</div>
<div id="excercise" class="section level2">
<h2>EXCERCISE</h2>
<p>Now it’s your turn to try! We want to know if landlocked countries are home to heavier drinkers - in all three different categories (beer, wine, spirits). So your task is to visualize differences between landlocked and non-landlocked countries in all three of these, in a single plot. Use whichever visualization method you are most comfortable with, and you think will display the data best for the question we want to ask. Don’t forget - visualization is as much design as it is coding! Try to make your figure clear and concise, but also visually appealing. Try to please your own sense of aesthetic first!</p>
</div>
</div>
<div id="interactive-visualization" class="section level1">
<h1>Interactive visualization</h1>
<p>In this part we will learn how to create interactive plots and how to use them online and in presentations or Rmd files for reporting our results.</p>
<div id="introduction-to-plotly" class="section level2">
<h2>Introduction to plotly</h2>
<p>Plotly is a grate cross platform package that allows a lot of variation for plotting interactive plots. We will use the R version of the package. Lets start with a simple use of the package, which transformes our ggplots to interactive visualizations with the code ggplotly()</p>
<pre class="r"><code>p &lt;- ggplot(aes(x = SQKM_CNTRY, y = total, colour = Continent), data = data.vis) + geom_point() + ggtitle(&quot;Per capita alcohol consumption&quot;) + scale_colour_manual(values = witness.me) + scale_x_continuous(trans = log10_trans())
p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<pre class="r"><code>ggplotly(p)</code></pre>
<div id="htmlwidget-68e2f00b87e48d74f474" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-68e2f00b87e48d74f474">{"x":{"data":[{"x":[6.36566990119748,6.09775034104936,5.76343637087294,5.06638108285023,4.43542816408337,6.06744358643068,5.53835942396721,6.36866372988614,5.66867164436435,3.22003587403836,5.79344069623722,3.59791425197255,4.33520991093879,5.99251391923857,4.43273366628145,5.08614902922593,6.05397224660192,4.02847364745965,5.41778497471989,5.38017668859194,5.39107014109965,5.5081465547805,5.76673152610946,4.98360838732888,4.48218217672853,6.20965305535408,5.77441212022522,5.07564876414434,6.09924785719034,5.60623063877285,6.01768846256236,5.89687267436488,6.07409237882873,5.9600132311674,4.52679648057406,4.40188678170274,2.68915518583345,6.08705110741591,5.29426932267702,4.86052623991848,5.80554511791888,6.39627067715859,4.75815227995418,3.02027217683396,5.19145520647634,5.97542118080262,5.3856954574464,5.43730524297252,4.23462126383944,5.87781617651476,5.59195844456536,5.91740023210828],"y":[0.44,7.71,4.78,1.08,1.59,0.37,3.53,0.88,2.62,0.15,0.34,4.74,0.43,0.22,9.93,0.4,0.42,0.2,8.82,0.69,0.19,0.99,1.39,3.64,2.11,0,1.03,0.34,0.11,0.56,0,0.9,0.11,0.81,1.67,0.84,6.5,6,0.29,0.23,0,0.46,0.93,5.57,1.28,0.92,0.84,0.7,1.76,1.06,2.11,7.29],"text":["SQKM_CNTRY:  2320972.000<br />total:  0.44<br />Continent: Africa","SQKM_CNTRY:  1252421.000<br />total:  7.71<br />Continent: Africa","SQKM_CNTRY:   580011.188<br />total:  4.78<br />Continent: Africa","SQKM_CNTRY:   116514.797<br />total:  1.08<br />Continent: Africa","SQKM_CNTRY:    27253.869<br />total:  1.59<br />Continent: Africa","SQKM_CNTRY:  1168002.000<br />total:  0.37<br />Continent: Africa","SQKM_CNTRY:   345429.500<br />total:  3.53<br />Continent: Africa","SQKM_CNTRY:  2337027.000<br />total:  0.88<br />Continent: Africa","SQKM_CNTRY:   466306.688<br />total:  2.62<br />Continent: Africa","SQKM_CNTRY:     1659.724<br />total:  0.15<br />Continent: Africa","SQKM_CNTRY:   621499.375<br />total:  0.34<br />Continent: Africa","SQKM_CNTRY:     3961.998<br />total:  4.74<br />Continent: Africa","SQKM_CNTRY:    21637.641<br />total:  0.43<br />Continent: Africa","SQKM_CNTRY:   982910.375<br />total:  0.22<br />Continent: Africa","SQKM_CNTRY:    27085.301<br />total:  9.93<br />Continent: Africa","SQKM_CNTRY:   121940.797<br />total:  0.40<br />Continent: Africa","SQKM_CNTRY:  1132328.000<br />total:  0.42<br />Continent: Africa","SQKM_CNTRY:    10677.600<br />total:  0.20<br />Continent: Africa","SQKM_CNTRY:   261688.703<br />total:  8.82<br />Continent: Africa","SQKM_CNTRY:   239980.906<br />total:  0.69<br />Continent: Africa","SQKM_CNTRY:   246076.500<br />total:  0.19<br />Continent: Africa","SQKM_CNTRY:   322215.594<br />total:  0.99<br />Continent: Africa","SQKM_CNTRY:   584428.688<br />total:  1.39<br />Continent: Africa","SQKM_CNTRY:    96296.031<br />total:  3.64<br />Continent: Africa","SQKM_CNTRY:    30351.641<br />total:  2.11<br />Continent: Africa","SQKM_CNTRY:  1620515.000<br />total:  0.00<br />Continent: Africa","SQKM_CNTRY:   594856.375<br />total:  1.03<br />Continent: Africa","SQKM_CNTRY:   119027.898<br />total:  0.34<br />Continent: Africa","SQKM_CNTRY:  1256747.000<br />total:  0.11<br />Continent: Africa","SQKM_CNTRY:   403859.812<br />total:  0.56<br />Continent: Africa","SQKM_CNTRY:  1041570.000<br />total:  0.00<br />Continent: Africa","SQKM_CNTRY:   788628.875<br />total:  0.90<br />Continent: Africa","SQKM_CNTRY:  1186021.000<br />total:  0.11<br />Continent: Africa","SQKM_CNTRY:   912038.625<br />total:  0.81<br />Continent: Africa","SQKM_CNTRY:    33635.391<br />total:  1.67<br />Continent: Africa","SQKM_CNTRY:    25228.230<br />total:  0.84<br />Continent: Africa","SQKM_CNTRY:      488.827<br />total:  6.50<br />Continent: Africa","SQKM_CNTRY:  1221943.449<br />total:  6.00<br />Continent: Africa","SQKM_CNTRY:   196910.703<br />total:  0.29<br />Continent: Africa","SQKM_CNTRY:    72531.430<br />total:  0.23<br />Continent: Africa","SQKM_CNTRY:   639065.125<br />total:  0.00<br />Continent: Africa","SQKM_CNTRY:  2490409.000<br />total:  0.46<br />Continent: Africa","SQKM_CNTRY:    57299.691<br />total:  0.93<br />Continent: Africa","SQKM_CNTRY:     1047.785<br />total:  5.57<br />Continent: Africa","SQKM_CNTRY:   155401.500<br />total:  1.28<br />Continent: Africa","SQKM_CNTRY:   944976.875<br />total:  0.92<br />Continent: Africa","SQKM_CNTRY:   243049.906<br />total:  0.84<br />Continent: Africa","SQKM_CNTRY:   273719.188<br />total:  0.70<br />Continent: Africa","SQKM_CNTRY:    17164.109<br />total:  1.76<br />Continent: Africa","SQKM_CNTRY:   754772.688<br />total:  1.06<br />Continent: Africa","SQKM_CNTRY:   390803.500<br />total:  2.11<br />Continent: Africa","SQKM_CNTRY:   826799.551<br />total:  7.29<br />Continent: Africa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(222,129,54,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(222,129,54,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[5.80744652850754,4.93352880704855,2.81774248856863,5.14147235926192,5.82595867822331,4.60126681030785,3.76114081227672,5.26153001930686,4.82334536935885,6.97029581805315,6.28122477843913,6.48985755396475,6.21078921862354,4.3175163642471,5.63990654167833,5.57176635280671,4.95072788379945,5.29959445392492,5.0880389447737,4.99272406090048,4.23003923960408,6.43392592793777,5.36279544228496,4.01029486722153,6.1928951411764,3.3086064537932,5.49087375756611,2.21833853137602,5.51886859256559,5.16818091068653,5.94337250802182,4.04527915587125,5.47441123310173,7.2266499041864,6.29229484591852,2.72101959468574,5.27401229002042,4.85268980721568,5.71192864586408,5.15354139217025,5.67341583406143,5.64905365647082,5.51471054140608,5.62892090199381],"y":[0.01,1.84,1.93,0,0.3,0.28,0.86,2.19,2.27,5.75,0.08,2.77,0.03,2.57,0.18,5.37,0.5,2.73,3.12,2.42,0.01,6.83,5.95,1.56,5.8,2.95,0.56,1.84,0.48,0.24,0.03,1.15,4.71,10.92,0.09,1.81,0.78,1.68,5.93,0.32,2.48,2.73,3.93,0.06],"text":["SQKM_CNTRY:   641869.188<br />total:  0.01<br />Continent: Asia","SQKM_CNTRY:    85808.203<br />total:  1.84<br />Continent: Asia","SQKM_CNTRY:      657.268<br />total:  1.93<br />Continent: Asia","SQKM_CNTRY:   138507.203<br />total:  0.00<br />Continent: Asia","SQKM_CNTRY:   669820.875<br />total:  0.30<br />Continent: Asia","SQKM_CNTRY:    39927.012<br />total:  0.28<br />Continent: Asia","SQKM_CNTRY:     5769.535<br />total:  0.86<br />Continent: Asia","SQKM_CNTRY:   182612.297<br />total:  2.19<br />Continent: Asia","SQKM_CNTRY:    66580.242<br />total:  2.27<br />Continent: Asia","SQKM_CNTRY:  9338902.000<br />total:  5.75<br />Continent: Asia","SQKM_CNTRY:  1910842.000<br />total:  0.08<br />Continent: Asia","SQKM_CNTRY:  3089282.000<br />total:  2.77<br />Continent: Asia","SQKM_CNTRY:  1624760.000<br />total:  0.03<br />Continent: Asia","SQKM_CNTRY:    20773.820<br />total:  2.57<br />Continent: Asia","SQKM_CNTRY:   436421.906<br />total:  0.18<br />Continent: Asia","SQKM_CNTRY:   373049.406<br />total:  5.37<br />Continent: Asia","SQKM_CNTRY:    89274.594<br />total:  0.50<br />Continent: Asia","SQKM_CNTRY:   199340.000<br />total:  2.73<br />Continent: Asia","SQKM_CNTRY:   122472.602<br />total:  3.12<br />Continent: Asia","SQKM_CNTRY:    98338.609<br />total:  2.42<br />Continent: Asia","SQKM_CNTRY:    16983.971<br />total:  0.01<br />Continent: Asia","SQKM_CNTRY:  2715976.000<br />total:  6.83<br />Continent: Asia","SQKM_CNTRY:   230566.094<br />total:  5.95<br />Continent: Asia","SQKM_CNTRY:    10239.880<br />total:  1.56<br />Continent: Asia","SQKM_CNTRY:  1559176.000<br />total:  5.80<br />Continent: Asia","SQKM_CNTRY:     2035.197<br />total:  2.95<br />Continent: Asia","SQKM_CNTRY:   309651.906<br />total:  0.56<br />Continent: Asia","SQKM_CNTRY:      165.325<br />total:  1.84<br />Continent: Asia","SQKM_CNTRY:   330269.594<br />total:  0.48<br />Continent: Asia","SQKM_CNTRY:   147292.594<br />total:  0.24<br />Continent: Asia","SQKM_CNTRY:   877753.375<br />total:  0.03<br />Continent: Asia","SQKM_CNTRY:    11098.880<br />total:  1.15<br />Continent: Asia","SQKM_CNTRY:   298133.812<br />total:  4.71<br />Continent: Asia","SQKM_CNTRY: 16851940.000<br />total: 10.92<br />Continent: Asia","SQKM_CNTRY:  1960175.000<br />total:  0.09<br />Continent: Asia","SQKM_CNTRY:      526.041<br />total:  1.81<br />Continent: Asia","SQKM_CNTRY:   187937.000<br />total:  0.78<br />Continent: Asia","SQKM_CNTRY:    71234.406<br />total:  1.68<br />Continent: Asia","SQKM_CNTRY:   515144.000<br />total:  5.93<br />Continent: Asia","SQKM_CNTRY:   142410.297<br />total:  0.32<br />Continent: Asia","SQKM_CNTRY:   471428.500<br />total:  2.48<br />Continent: Asia","SQKM_CNTRY:   445711.312<br />total:  2.73<br />Continent: Asia","SQKM_CNTRY:   327122.594<br />total:  3.93<br />Continent: Asia","SQKM_CNTRY:   425520.906<br />total:  0.06<br />Continent: Asia"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(25,25,27,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(25,25,27,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.4587058202339,4.47527100280811,2.65560418680044,4.9229270027281,4.48400939146574,4.71099166827195,5.31529993007752,5.04454563979055,3.96505331917989,4.63012987934406,4.84126030983019,4.65843650123397,4.89484285690601,5.52348230683887,5.73777201137465,4.84474566566214,5.55158272053082,5.12008641216737,4.75041418978726,4.96746468009679,5.00777037523082,5.47853691639096,4.8082034824618,4.81190461616369,4.68706774892642,3.41398955976213,4.52591226980523,4.40348581000797,2.52161659042008,4.13808312654993,4.55013892812037,5.50100775485196,5.49236235103961,4.96425148650953,5.37411384944735,4.30633256123811,5.70387097298343,4.94547724139135,5.64718699257845,4.6146694468645,5.89208691226933,5.38585141635643,5.77527604359636],"y":[5.16,4.21,10.61,12.1,10.2,4.41,9.98,10.76,11.31,10.22,10.93,13.16,12.69,8.5,11.5,7.23,11.21,8.9,11.7,10.78,8.11,6.95,9.28,11.4,9.79,11.36,8.02,1.47,7.61,6.42,9.33,6.45,10.59,11.79,9,10.32,9.6,9.45,7.2,9.89,1.49,9.97,8.17],"text":["SQKM_CNTRY:    28754.500<br />total:  5.16<br />Continent: Europe","SQKM_CNTRY:    29872.461<br />total:  4.21<br />Continent: Europe","SQKM_CNTRY:      452.485<br />total: 10.61<br />Continent: Europe","SQKM_CNTRY:    83738.852<br />total: 12.10<br />Continent: Europe","SQKM_CNTRY:    30479.609<br />total: 10.20<br />Continent: Europe","SQKM_CNTRY:    51403.379<br />total:  4.41<br />Continent: Europe","SQKM_CNTRY:   206680.703<br />total:  9.98<br />Continent: Europe","SQKM_CNTRY:   110801.500<br />total: 10.76<br />Continent: Europe","SQKM_CNTRY:     9226.847<br />total: 11.31<br />Continent: Europe","SQKM_CNTRY:    42670.711<br />total: 10.22<br />Continent: Europe","SQKM_CNTRY:    69384.156<br />total: 10.93<br />Continent: Europe","SQKM_CNTRY:    45544.559<br />total: 13.16<br />Continent: Europe","SQKM_CNTRY:    78495.156<br />total: 12.69<br />Continent: Europe","SQKM_CNTRY:   333796.906<br />total:  8.50<br />Continent: Europe","SQKM_CNTRY:   546728.875<br />total: 11.50<br />Continent: Europe","SQKM_CNTRY:    69943.227<br />total:  7.23<br />Continent: Europe","SQKM_CNTRY:   356108.812<br />total: 11.21<br />Continent: Europe","SQKM_CNTRY:   131851.906<br />total:  8.90<br />Continent: Europe","SQKM_CNTRY:    56287.789<br />total: 11.70<br />Continent: Europe","SQKM_CNTRY:    92782.203<br />total: 10.78<br />Continent: Europe","SQKM_CNTRY:   101805.297<br />total:  8.11<br />Continent: Europe","SQKM_CNTRY:   300979.500<br />total:  6.95<br />Continent: Europe","SQKM_CNTRY:    64298.891<br />total:  9.28<br />Continent: Europe","SQKM_CNTRY:    64849.199<br />total: 11.40<br />Continent: Europe","SQKM_CNTRY:    48648.309<br />total:  9.79<br />Continent: Europe","SQKM_CNTRY:     2594.117<br />total: 11.36<br />Continent: Europe","SQKM_CNTRY:    33566.980<br />total:  8.02<br />Continent: Europe","SQKM_CNTRY:    25321.289<br />total:  1.47<br />Continent: Europe","SQKM_CNTRY:      332.366<br />total:  7.61<br />Continent: Europe","SQKM_CNTRY:    13743.050<br />total:  6.42<br />Continent: Europe","SQKM_CNTRY:    35492.691<br />total:  9.33<br />Continent: Europe","SQKM_CNTRY:   316962.406<br />total:  6.45<br />Continent: Europe","SQKM_CNTRY:   310715.094<br />total: 10.59<br />Continent: Europe","SQKM_CNTRY:    92098.273<br />total: 11.79<br />Continent: Europe","SQKM_CNTRY:   236654.000<br />total:  9.00<br />Continent: Europe","SQKM_CNTRY:    20245.689<br />total: 10.32<br />Continent: Europe","SQKM_CNTRY:   505674.406<br />total:  9.60<br />Continent: Europe","SQKM_CNTRY:    88201.758<br />total:  9.45<br />Continent: Europe","SQKM_CNTRY:   443799.688<br />total:  7.20<br />Continent: Europe","SQKM_CNTRY:    41178.398<br />total:  9.89<br />Continent: Europe","SQKM_CNTRY:   779986.188<br />total:  1.49<br />Continent: Europe","SQKM_CNTRY:   243137.203<br />total:  9.97<br />Continent: Europe","SQKM_CNTRY:   596040.875<br />total:  8.17<br />Continent: Europe"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(246,202,177,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(246,202,177,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.66499716212117,2.64339542480372,4.10950362717532,6.99584132587985,4.71271735708082,5.04313819501313,2.86450930115933,4.68524930986484,4.31589711765363,2.56449089109948,5.03942124630655,4.43388081677464,5.05250926019063,4.04312089256947,6.29290680373907,5.11074925223026,2.4396831464847,2.78202663424162,3.71194626534631,6.97546489635217,2.59063789801438],"y":[7.57,8.2,8.81,8.2,3.54,4.1,7.38,5.95,2.36,7.71,2.12,5.75,3.1,3.29,5.16,3.38,8.18,10.28,6.41,8.55,6.87],"text":["SQKM_CNTRY:      462.378<br />total:  7.57<br />Continent: North America","SQKM_CNTRY:      439.942<br />total:  8.20<br />Continent: North America","SQKM_CNTRY:    12867.780<br />total:  8.81<br />Continent: North America","SQKM_CNTRY:  9904700.000<br />total:  8.20<br />Continent: North America","SQKM_CNTRY:    51608.039<br />total:  3.54<br />Continent: North America","SQKM_CNTRY:   110443.000<br />total:  4.10<br />Continent: North America","SQKM_CNTRY:      731.997<br />total:  7.38<br />Continent: North America","SQKM_CNTRY:    48445.039<br />total:  5.95<br />Continent: North America","SQKM_CNTRY:    20696.510<br />total:  2.36<br />Continent: North America","SQKM_CNTRY:      366.852<br />total:  7.71<br />Continent: North America","SQKM_CNTRY:   109501.797<br />total:  2.12<br />Continent: North America","SQKM_CNTRY:    27156.939<br />total:  5.75<br />Continent: North America","SQKM_CNTRY:   112852.000<br />total:  3.10<br />Continent: North America","SQKM_CNTRY:    11043.860<br />total:  3.29<br />Continent: North America","SQKM_CNTRY:  1962939.000<br />total:  5.16<br />Continent: North America","SQKM_CNTRY:   129047.398<br />total:  3.38<br />Continent: North America","SQKM_CNTRY:      275.222<br />total:  8.18<br />Continent: North America","SQKM_CNTRY:      605.378<br />total: 10.28<br />Continent: North America","SQKM_CNTRY:     5151.649<br />total:  6.41<br />Continent: North America","SQKM_CNTRY:  9450720.000<br />total:  8.55<br />Continent: North America","SQKM_CNTRY:      389.617<br />total:  6.87<br />Continent: North America"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(83,57,39,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(83,57,39,1)"}},"hoveron":"points","name":"North America","legendgroup":"North America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6.88683700743434,4.44310208872105,2.36461102327188,4.28699262931735,2.84593975510924,3.02118516291232,2.35758803489603,4.09812087362559,1.45467720522038,5.42621868583413,5.66853611187201,2.84293670893973,1.48852251464441,3.44757273961188],"y":[9.68,1.05,10.72,2.25,1.77,0.47,4.9,0.91,1.1,8.39,0.79,1.24,1.02,3.01],"text":["SQKM_CNTRY:  7706142.000<br />total:  9.68<br />Continent: Oceania","SQKM_CNTRY:    27739.721<br />total:  1.05<br />Continent: Oceania","SQKM_CNTRY:      231.532<br />total: 10.72<br />Continent: Oceania","SQKM_CNTRY:    19363.891<br />total:  2.25<br />Continent: Oceania","SQKM_CNTRY:      701.358<br />total:  1.77<br />Continent: Oceania","SQKM_CNTRY:     1049.990<br />total:  0.47<br />Continent: Oceania","SQKM_CNTRY:      227.818<br />total:  4.90<br />Continent: Oceania","SQKM_CNTRY:    12534.900<br />total:  0.91<br />Continent: Oceania","SQKM_CNTRY:       28.489<br />total:  1.10<br />Continent: Oceania","SQKM_CNTRY:   266820.188<br />total:  8.39<br />Continent: Oceania","SQKM_CNTRY:   466161.188<br />total:  0.79<br />Continent: Oceania","SQKM_CNTRY:      696.525<br />total:  1.24<br />Continent: Oceania","SQKM_CNTRY:       30.798<br />total:  1.02<br />Continent: Oceania","SQKM_CNTRY:     2802.675<br />total:  3.01<br />Continent: Oceania"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(152,96,57,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(152,96,57,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6.44420301900262,4.34586010321294,6.03756712283343,6.92978296733828,5.87057840041182,6.05765165253952,5.40981819752422,5.32477882534843,5.16285553115332,5.60215705181225,6.11291050868933,4.87330379365417,5.25076339101285,5.96216113700033],"y":[7.68,6.61,3.93,7.48,7.93,4.27,3.93,7.5,5.09,5.59,4.73,6.92,6.21,7.16],"text":["SQKM_CNTRY:  2781013.000<br />total:  7.68<br />Continent: South America","SQKM_CNTRY:    22174.820<br />total:  6.61<br />Continent: South America","SQKM_CNTRY:  1090353.000<br />total:  3.93<br />Continent: South America","SQKM_CNTRY:  8507128.000<br />total:  7.48<br />Continent: South America","SQKM_CNTRY:   742298.188<br />total:  7.93<br />Continent: South America","SQKM_CNTRY:  1141962.000<br />total:  4.27<br />Continent: South America","SQKM_CNTRY:   256932.000<br />total:  3.93<br />Continent: South America","SQKM_CNTRY:   211241.297<br />total:  7.50<br />Continent: South America","SQKM_CNTRY:   145497.500<br />total:  5.09<br />Continent: South America","SQKM_CNTRY:   400089.406<br />total:  5.59<br />Continent: South America","SQKM_CNTRY:  1296912.000<br />total:  4.73<br />Continent: South America","SQKM_CNTRY:    74697.109<br />total:  6.92<br />Continent: South America","SQKM_CNTRY:   178140.797<br />total:  6.21<br />Continent: South America","SQKM_CNTRY:   916560.500<br />total:  7.16<br />Continent: South America"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(22,98,104,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(22,98,104,1)"}},"hoveron":"points","name":"South America","legendgroup":"South America","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.6147779161478,"r":9.29846409298464,"b":52.2015774180158,"l":48.4821917808219},"font":{"color":"rgba(0,0,0,1)","family":"","size":18.5969281859693},"title":"<b> Per capita alcohol consumption <\/b>","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":18.5969281859693},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1.16607857027208,7.5152485391347],"tickmode":"array","ticktext":["1e+03","1e+05","1e+07"],"tickvals":[3,5,7],"categoryorder":"array","categoryarray":["1e+03","1e+05","1e+07"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":4.64923204649232,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":15.9375674553757},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"SQKM_CNTRY","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":18.5969281859693},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.658,13.818],"tickmode":"array","ticktext":["0","5","10"],"tickvals":[0,5,10],"categoryorder":"array","categoryarray":["0","5","10"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":4.64923204649232,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":15.9375674553757},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"total","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":18.5969281859693},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":15.9375674553757},"y":0.958661417322835},"annotations":[{"text":"Continent","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":18.5969281859693},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"35b41e18578d":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"35b41e18578d","visdat":{"35b41e18578d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>Now we can also just use ## Introduction to ggvis</p>
</div>
<div id="introduction-to-3d" class="section level2">
<h2>Introduction to 3D</h2>
</div>
</div>
<div id="geographic-plotting" class="section level1">
<h1>Geographic plotting</h1>
<p>We can plot two types of geographical plots in R - stationary and interactive. The first one is done with ggplot the second is mainly done with leaflet but note that there are some more packages out there. We’ll start with ggplot</p>
<div id="ggplot2" class="section level2">
<h2>ggplot2</h2>
<p>For this we need a few packages that we uploaded before: <code>maps</code>, <code>mapdata</code>, and <code>ggplot2</code> * The <code>maps</code> package contains a lot of outlines of continents, countries, states, and counties that have been with R for a long time. * The <code>mapdata</code> package contains a few more, higher-resolution outlines. * The <code>maps</code> package comes with a plotting function, but, we will opt to use <code>ggplot2</code> to plot the maps in the <code>maps</code> package. * Recall that <code>ggplot2</code> operates on data frames. Therefore we need some way to translate the maps data into a data frame format the <code>ggplot</code> can use.</p>
<p>First we’ll create a world map tamplate that we will use to map our data on it</p>
<pre class="r"><code>w2hr &lt;- map_data(&quot;world2Hires&quot;)</code></pre>
</div>
<div id="leaflet" class="section level2">
<h2>leaflet</h2>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
